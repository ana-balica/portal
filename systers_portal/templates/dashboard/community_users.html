{% extends "dashboard/base.html" %}
{% load guardian_tags %}
{% block title %}{{ community.name }} Users{% endblock %}
{% block content %}
<div>
  <h3>Manage {{ community.name }} users</h3>
  <div>
    {% get_obj_perms request.user for community as "community_perms" %}
    <table class="table table-bordered table-hover table-condensed">
      <thead>
      <tr>
        <th>#</th>
        <th>Username</th>
        <th>First name</th>
        <th>Last name</th>
        <th>Email address</th>
        {% if "change_community_systeruser" in community_perms %}
          <th>Manage user permissions</th>
        {% endif %}
      </tr>
      </thead>
      <tbody>
      {% for user in users %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td><a href="{% url 'view_userprofile' user.user.username %}">{{ user.user.username }}</a>
          </td>
          <td>{{ user.user.first_name }}</td>
          <td>{{ user.user.last_name }}</td>
          <td>{{ user.user.email }}</td>
          {% if 'change_community_systeruser' in community_perms %}
            <td><a
                href="{% url 'manage_user_groups' community.slug user.user.username %}">Manage
              permissions for {{ user.user.username }}</a></td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

{% for user in users %}
{{ user }}
{% endfor %}